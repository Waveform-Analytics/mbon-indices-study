# Analysis configuration (stub)

responses:
  fish_activity:
    family: nbinom2
  fish_richness:
    family: nbinom2
  fish_presence:
    family: binomial
  dolphin_burst_pulse:
    family: nbinom2
  dolphin_echolocation:
    family: nbinom2
  dolphin_whistle:
    family: nbinom2
  dolphin_activity:
    family: nbinom2
  dolphin_presence:
    family: binomial
  vessel_presence:
    family: binomial

predictors:
  indices_source: data/raw/indices/
  aligned_indices_path: data/interim/aligned_indices.parquet
  final_list_path: data/processed/indices_final.csv
  include_bands: ["8kHz", "FullBW"]
  band_policy: separate
  analysis_band: FullBW

covariates:
  temperature: true
  depth: true

scaling:
  enabled: true
  # Which predictor groups to scale: "indices", "covariates", or explicit list
  include:
    - indices
    - covariates
  # Predictors to exclude from scaling (already bounded or categorical)
  exclude:
    - sin_hour
    - cos_hour

temporal:
  resolution_hours: 2
  cyclic_terms: ["sin_hour", "cos_hour"]
  timezone: UTC

random_effects:
  - station
  - month_id
  - day_id

autocorrelation:
  glmm_ar1: true
  sequence_column: time_within_day

thresholds:
  correlation_r: 0.6
  correlation_sensitivity_r: 0.8
  vif: 2
  vif_fallback: 5
  min_coverage_fraction: 0.95

stations:
  include: ["9M", "14M", "37M"]

seeds:
  analysis: 1234

community_metrics:
  assume_zero_when_missing: false
  season_definition: month

exploratory:
  heatmap_color_scheme: viridis
  heatmap_midnight_center: true

gamm:
  smooth_k: 5
  cyclic_k: 12
  method: fREML
  discrete: true
  select: true

selection:
  delta_aic_equivalent: 4
  delta_aic_moderate: 10
  prefer_simpler_when_equivalent: true
  cv_primary_metric_counts: rmse
  cv_primary_metric_binary: auc

alignment:
  spl_aggregation: mean
  env_max_gap_hours: 2

sources:
  detections:
    required_columns: ["Date"]
    datetime_column: "Date"
    sheet_name: Data
    timezone: UTC
  environment:
    required_columns: ["Date and time"]
    datetime_column: "Date and time"
    sheet_name: Data
    timezone: UTC
  spl:
    required_columns: ["Date", "Time"]
    compose_datetime:
      date_key: "Date"
      time_key: "Time"
    sheet_name: Data
    timezone: UTC
  indices:
    required_columns: ["Date"]
    datetime_column: "Date"
    timezone: UTC
